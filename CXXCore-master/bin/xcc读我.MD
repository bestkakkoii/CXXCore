# 炫资源编译器(XCC)使用说明

炫资源编译器（XC Resource Compiler）是一个工具，用于遍历指定目录中的文件，将它们压缩（可选），并生成C++资源文件，其中包含静态资源数据。

## 新手使用方法

双击 `rcc.exe` 依次输入 目录 -> 回车 -> 输出文件 ->回车 -> 输入 [y/n] 选择是否压缩 -> 如果输入`y`接下来输入压缩模式 -> 生成

## Command Prompt 使用方法

```bash
xcc.exe <输入目录> <输出文件.hpp> [选项]
```

- `<输入目录>`: 需要编译资源的根目录路径。
- `<输出文件.hpp>`: 生成的资源文件名称，必须以 `.hpp` 或 `.xcc`[尚未实装] 结尾。
- `[选项]`: 可选的命令行参数。

### 可用选项

- `-compress`: 启用压缩。如果设置此选项，所有资源将在嵌入到输出文件之前被压缩。
- `-level`: 设置压缩等级，后跟 `best`, `default` 或 `speed`。
  - `best`: 最佳压缩，压缩比最高。
  - `default`: 默认压缩，平衡速度和压缩比。
  - `speed`: 最快压缩，压缩速度最快，但压缩比较低。

## 示例

将 `my_directory` 目录下的所有文件编译成 `resource.hpp` 文件，启用压缩，并设置压缩等级为最佳：

为了确保输出中文的正确性，建议使用 `chcp` 命令设置控制台编码页 `>nul` 是用于隐藏其返回内容

```bash
chcp 65001 >nul
xcc.exe "D:/my_directory" "resource.hpp" -compress -level "best"
```

基于您的代码和要求，下面是关于“输出文件描述”部分的详细中文说明，特别是针对每个结构数据的细节：

## 输出文件描述

生成的 `.hpp` 文件主要包含以下部分的定义和数据：

1. **资源数据 (`xc_resource_data`)**: 这部分包含了资源的二进制数据。这些数据可以是原始的，也可以是压缩过的，具体取决于是否启用了 `-compress` 选项。数据结构如下：
   - **数据长度**: 该部分是4个字节长，表示随后资源数据的长度（如果压缩，则为压缩后的长度）。
   - **压缩标志**: 接下来是1个字节，如果数据被压缩，该字节为1；如果数据未被压缩，该字节为0。
   - **数据**: 紧随压缩标志之后的是实际的资源数据。长度由前面的数据长度字段确定。
   - 以上格式会针对每个资源重复，以确保文件中可以包含多个资源。

2. **资源名称 (`xc_resource_name`)**: 此部分存储了资源文件的名称，它是资源识别的关键。每个资源名称也以二进制形式表示，格式如下：
   - **名称长度**: 以4个字节表示，描述了资源名称字符串的长度。
   - **压缩标志**: 接下来是1个字节，但不使用。
   - **名称数据**: 实际的资源名称，以UTF-8编码表示。
   - 如同资源数据，每个资源名称的结构都会重复。

3. **资源结构 (`xc_resource_struct`)**: 这部分描述了资源的目录结构。每个资源的结构都会被记录，格式如下：
   - **路径长度**: 以4个字节表示，指示后续路径字符串的长度。
   - **压缩标志**: 接下来是1个字节，但不使用。
   - **路径数据**: 资源的相对路径，以UTF-8编码表示，允许您了解每个资源文件在原始目录中的位置。
   - 同样，每个资源结构的格式会重复，对应文件中每个资源。

请注意，每部分的开始都会有一个描述，可能以注释的形式出现，用于指示该部分的作用。在 `.hpp` 输出文件中，这些数据将按照上述格式编排，使得在将来需要时，可以轻松地从编译后的资源中提取和使用这些数据。

每个数据块的开始可能会用特定的注释或者标记来标识，例如资源数据部分可能以 `static const unsigned char xc_resource_data[] = {` 开头，紧接着是具体的数据表示。

## 注意事项

- 在处理输出文件时，请确保按照正确的顺序和格式解析每个部分中的数据，特别是数据长度和压缩标志。
- 如果启用了数据压缩，则在使用资源前需要先将其解压。
- 输出文件的内容将直接影响资源加载和使用的效率，因此请确保在资源编译过程中没有错误。

## 注意事项

- 确保输入的目录路径和文件名正确无误。
- 当使用 `-compress` 选项时，资源数据将被压缩，可以减少最终二进制文件的大小。
- 输出文件将采用 UTF-8 编码格式，并带有 BOM（字节顺序标记）。